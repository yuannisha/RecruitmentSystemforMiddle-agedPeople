{"version":3,"file":"edit.js","sources":["pages/job/edit.vue","E:/HBuilderX/HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvam9iL2VkaXQudnVl"],"sourcesContent":["<!--\r\n * @description 编辑职位页面\r\n -->\r\n<template>\r\n\t<view class=\"edit-container\">\r\n\t\t<view class=\"form-group\">\r\n\t\t\t<view class=\"form-item\">\r\n\t\t\t\t<text class=\"label\">职位名称</text>\r\n\t\t\t\t<input type=\"text\" v-model=\"formData.title\" placeholder=\"请输入职位名称\" />\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<view class=\"form-item\">\r\n\t\t\t\t<text class=\"label\">薪资范围</text>\r\n\t\t\t\t<input type=\"text\" v-model=\"formData.salary\" placeholder=\"例如：8k-12k\" />\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<view class=\"form-item\">\r\n\t\t\t\t<text class=\"label\">工作经验</text>\r\n\t\t\t\t<picker \r\n\t\t\t\t\t:value=\"experienceIndex\" \r\n\t\t\t\t\t:range=\"experienceOptions\"\r\n\t\t\t\t\t@change=\"handleExperienceChange\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<view class=\"picker-value\">{{ formData.experience || '请选择工作经验' }}</view>\r\n\t\t\t\t</picker>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<view class=\"form-item\">\r\n\t\t\t\t<text class=\"label\">学历要求</text>\r\n\t\t\t\t<picker \r\n\t\t\t\t\t:value=\"educationIndex\" \r\n\t\t\t\t\t:range=\"educationOptions\"\r\n\t\t\t\t\t@change=\"handleEducationChange\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<view class=\"picker-value\">{{ formData.education || '请选择学历要求' }}</view>\r\n\t\t\t\t</picker>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<view class=\"form-item\">\r\n\t\t\t\t<text class=\"label\">工作地点</text>\r\n\t\t\t\t<input type=\"text\" v-model=\"formData.location\" placeholder=\"请输入工作地点\" />\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<view class=\"form-item\">\r\n\t\t\t\t<text class=\"label\">详细地址</text>\r\n\t\t\t\t<input type=\"text\" v-model=\"formData.address\" placeholder=\"请输入详细地址\" />\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<view class=\"form-group\">\r\n\t\t\t<view class=\"form-item\">\r\n\t\t\t\t<text class=\"label\">职位描述</text>\r\n\t\t\t\t<textarea \r\n\t\t\t\t\tv-model=\"formData.description\" \r\n\t\t\t\t\tplaceholder=\"请输入职位描述\"\r\n\t\t\t\t\tmaxlength=\"1000\"\r\n\t\t\t\t></textarea>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<view class=\"form-item\">\r\n\t\t\t\t<text class=\"label\">任职要求</text>\r\n\t\t\t\t<textarea \r\n\t\t\t\t\tv-model=\"formData.requirement\" \r\n\t\t\t\t\tplaceholder=\"请输入任职要求\"\r\n\t\t\t\t\tmaxlength=\"1000\"\r\n\t\t\t\t></textarea>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<button class=\"submit-btn\" @click=\"handleSubmit\">保存修改</button>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tjobId: '',\r\n\t\t\tuserInfo: null,\r\n\t\t\tformData: {\r\n\t\t\t\ttitle: '',\r\n\t\t\t\tsalary: '',\r\n\t\t\t\texperience: '',\r\n\t\t\t\teducation: '',\r\n\t\t\t\tlocation: '',\r\n\t\t\t\taddress: '',\r\n\t\t\t\tdescription: '',\r\n\t\t\t\trequirement: ''\r\n\t\t\t},\r\n\t\t\texperienceIndex: 0,\r\n\t\t\texperienceOptions: [\r\n\t\t\t\t'不限',\r\n\t\t\t\t'应届生',\r\n\t\t\t\t'1-3年',\r\n\t\t\t\t'3-5年',\r\n\t\t\t\t'5-10年',\r\n\t\t\t\t'10年以上'\r\n\t\t\t],\r\n\t\t\teducationIndex: 0,\r\n\t\t\teducationOptions: [\r\n\t\t\t\t'不限',\r\n\t\t\t\t'高中',\r\n\t\t\t\t'大专',\r\n\t\t\t\t'本科',\r\n\t\t\t\t'硕士',\r\n\t\t\t\t'博士'\r\n\t\t\t]\r\n\t\t}\r\n\t},\r\n\tonLoad(options) {\r\n\t\tthis.jobId = options.id\r\n\t\tthis.userInfo = uni.getStorageSync('userInfo')\r\n\t\t\r\n\t\tif (!this.userInfo || this.userInfo.userType !== 2) {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '非企业用户不能编辑职位',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t\t\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tuni.navigateBack()\r\n\t\t\t}, 1500)\r\n\t\t\treturn\r\n\t\t}\r\n\t\t\r\n\t\tthis.loadJobDetail()\r\n\t},\r\n\tmethods: {\r\n\t\tasync loadJobDetail() {\r\n\t\t\tuni.showLoading({\r\n\t\t\t\ttitle: '加载中...'\r\n\t\t\t})\r\n\t\t\t\r\n\t\t\ttry {\r\n\t\t\t\tconst result = await uniCloud.callFunction({\r\n\t\t\t\t\tname: 'jobCenter',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\taction: 'getJobDetail',\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\tjobId: this.jobId\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t\tif (result.result.code === 0) {\r\n\t\t\t\t\tconst jobInfo = result.result.data\r\n\t\t\t\t\tthis.formData = {\r\n\t\t\t\t\t\ttitle: jobInfo.title,\r\n\t\t\t\t\t\tsalary: jobInfo.salary,\r\n\t\t\t\t\t\texperience: jobInfo.experience,\r\n\t\t\t\t\t\teducation: jobInfo.education,\r\n\t\t\t\t\t\tlocation: jobInfo.location,\r\n\t\t\t\t\t\taddress: jobInfo.address,\r\n\t\t\t\t\t\tdescription: jobInfo.description,\r\n\t\t\t\t\t\trequirement: jobInfo.requirement\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 设置选择器的索引\r\n\t\t\t\t\tthis.experienceIndex = this.experienceOptions.indexOf(jobInfo.experience)\r\n\t\t\t\t\tthis.educationIndex = this.educationOptions.indexOf(jobInfo.education)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: result.result.msg,\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '加载失败，请重试',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t})\r\n\t\t\t} finally {\r\n\t\t\t\tuni.hideLoading()\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\thandleExperienceChange(e) {\r\n\t\t\tthis.experienceIndex = e.detail.value\r\n\t\t\tthis.formData.experience = this.experienceOptions[this.experienceIndex]\r\n\t\t},\r\n\t\t\r\n\t\thandleEducationChange(e) {\r\n\t\t\tthis.educationIndex = e.detail.value\r\n\t\t\tthis.formData.education = this.educationOptions[this.educationIndex]\r\n\t\t},\r\n\t\t\r\n\t\tasync handleSubmit() {\r\n\t\t\t// 表单验证\r\n\t\t\tif (!this.formData.title) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '请输入职位名称',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t})\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (!this.formData.salary) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '请输入薪资范围',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t})\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (!this.formData.location) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '请输入工作地点',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t})\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (!this.formData.description) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '请输入职位描述',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t})\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (!this.formData.requirement) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '请输入任职要求',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t})\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tuni.showLoading({\r\n\t\t\t\ttitle: '保存中...'\r\n\t\t\t})\r\n\t\t\t\r\n\t\t\ttry {\r\n\t\t\t\tconst result = await uniCloud.callFunction({\r\n\t\t\t\t\tname: 'jobCenter',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\taction: 'updateJob',\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\tjobId: this.jobId,\r\n\t\t\t\t\t\t\t...this.formData\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t\tif (result.result.code === 0) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '保存成功',\r\n\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t})\r\n\t\t\t\t\t\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tuni.navigateBack()\r\n\t\t\t\t\t}, 1500)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: result.result.msg,\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '保存失败，请重试',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t})\r\n\t\t\t} finally {\r\n\t\t\t\tuni.hideLoading()\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\r\n<style>\r\n.edit-container {\r\n\tmin-height: 100vh;\r\n\tbackground-color: #f8f8f8;\r\n\tpadding: 20rpx;\r\n\tpadding-bottom: 120rpx;\r\n}\r\n\r\n.form-group {\r\n\tbackground-color: #fff;\r\n\tborder-radius: 20rpx;\r\n\tpadding: 30rpx;\r\n\tmargin-bottom: 20rpx;\r\n}\r\n\r\n.form-item {\r\n\tmargin-bottom: 30rpx;\r\n}\r\n\r\n.form-item:last-child {\r\n\tmargin-bottom: 0;\r\n}\r\n\r\n.label {\r\n\tdisplay: block;\r\n\tfont-size: 28rpx;\r\n\tcolor: #333;\r\n\tmargin-bottom: 20rpx;\r\n}\r\n\r\ninput {\r\n\twidth: 100%;\r\n\theight: 80rpx;\r\n\tbackground-color: #f5f5f5;\r\n\tborder-radius: 40rpx;\r\n\tpadding: 0 30rpx;\r\n\tfont-size: 28rpx;\r\n}\r\n\r\n.picker-value {\r\n\twidth: 100%;\r\n\theight: 80rpx;\r\n\tbackground-color: #f5f5f5;\r\n\tborder-radius: 40rpx;\r\n\tpadding: 0 30rpx;\r\n\tfont-size: 28rpx;\r\n\tline-height: 80rpx;\r\n\tcolor: #333;\r\n}\r\n\r\ntextarea {\r\n\twidth: 100%;\r\n\theight: 200rpx;\r\n\tbackground-color: #f5f5f5;\r\n\tborder-radius: 20rpx;\r\n\tpadding: 20rpx 30rpx;\r\n\tfont-size: 28rpx;\r\n}\r\n\r\n.submit-btn {\r\n\tposition: fixed;\r\n\tleft: 40rpx;\r\n\tright: 40rpx;\r\n\tbottom: 40rpx;\r\n\theight: 80rpx;\r\n\tbackground-color: #007AFF;\r\n\tcolor: #fff;\r\n\tborder-radius: 40rpx;\r\n\tfont-size: 32rpx;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n}\r\n</style> ","import MiniProgramPage from 'D:/programs2024to2025/yangmenglianprogram/fifth/RecruitmentSystemforMiddle-agedPeople/pages/job/edit.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","uniCloud"],"mappings":"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"}