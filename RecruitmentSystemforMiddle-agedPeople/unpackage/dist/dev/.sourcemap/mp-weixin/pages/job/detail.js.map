{"version":3,"file":"detail.js","sources":["pages/job/detail.vue","E:/HBuilderX/HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvam9iL2RldGFpbC52dWU"],"sourcesContent":["<!--\r\n * @description 职位详情页\r\n -->\r\n<template>\r\n\t<view class=\"detail-container\">\r\n\t\t<view class=\"job-card\">\r\n\t\t\t<view class=\"job-header\">\r\n\t\t\t\t<text class=\"job-title\">{{ jobInfo.title }}</text>\r\n\t\t\t\t<text class=\"job-salary\">{{ jobInfo.salary }}</text>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<view class=\"job-company\">\r\n\t\t\t\t<text class=\"company-name\">{{ jobInfo.companyName }}</text>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<view class=\"job-tags\">\r\n\t\t\t\t<text class=\"tag\" v-if=\"jobInfo.experience\">{{ jobInfo.experience }}</text>\r\n\t\t\t\t<text class=\"tag\" v-if=\"jobInfo.education\">{{ jobInfo.education }}</text>\r\n\t\t\t\t<text class=\"tag\" v-if=\"jobInfo.location\">{{ jobInfo.location }}</text>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<view class=\"job-detail\">\r\n\t\t\t<view class=\"section\">\r\n\t\t\t\t<view class=\"section-title\">职位描述</view>\r\n\t\t\t\t<view class=\"section-content\">{{ jobInfo.description }}</view>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<view class=\"section\">\r\n\t\t\t\t<view class=\"section-title\">任职要求</view>\r\n\t\t\t\t<view class=\"section-content\">{{ jobInfo.requirement }}</view>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<view class=\"section\">\r\n\t\t\t\t<view class=\"section-title\">工作地址</view>\r\n\t\t\t\t<view class=\"section-content\">{{ jobInfo.address }}</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<!-- 申请按钮（仅求职者可见） -->\r\n\t\t<view class=\"action-bar\" v-if=\"userInfo && userInfo.userType === 1\">\r\n\t\t\t<button class=\"apply-btn\" @click=\"handleApply\">申请职位</button>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tjobId: '',\r\n\t\t\tjobInfo: {},\r\n\t\t\tuserInfo: null\r\n\t\t}\r\n\t},\r\n\tonLoad(options) {\r\n\t\tthis.jobId = options.id\r\n\t\tthis.userInfo = uni.getStorageSync('userInfo')\r\n\t\tthis.loadJobDetail()\r\n\t},\r\n\tmethods: {\r\n\t\tasync loadJobDetail() {\r\n\t\t\tuni.showLoading({\r\n\t\t\t\ttitle: '加载中...'\r\n\t\t\t})\r\n\t\t\t\r\n\t\t\ttry {\r\n\t\t\t\tconst result = await uniCloud.callFunction({\r\n\t\t\t\t\tname: 'jobCenter',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\taction: 'getJobDetail',\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\tjobId: this.jobId\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t\tif (result.result.code === 0) {\r\n\t\t\t\t\tthis.jobInfo = result.result.data\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: result.result.msg,\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '加载失败，请重试',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t})\r\n\t\t\t} finally {\r\n\t\t\t\tuni.hideLoading()\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tasync handleApply() {\r\n\t\t\tif (!this.userInfo) {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '/pages/login/login'\r\n\t\t\t\t})\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tuni.showLoading({\r\n\t\t\t\ttitle: '申请中...'\r\n\t\t\t})\r\n\t\t\t\r\n\t\t\ttry {\r\n\t\t\t\tconst result = await uniCloud.callFunction({\r\n\t\t\t\t\tname: 'jobCenter',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\taction: 'apply',\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\tuserId: this.userInfo.userId,\r\n\t\t\t\t\t\t\tjobId: this.jobId\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t\tif (result.result.code === 0) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '申请成功',\r\n\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t})\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 发送消息给企业\r\n\t\t\t\t\tawait uniCloud.callFunction({\r\n\t\t\t\t\t\tname: 'messageCenter',\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\taction: 'sendMessage',\r\n\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\tsenderId: this.userInfo.userId,\r\n\t\t\t\t\t\t\t\treceiverId: this.jobInfo.companyId,\r\n\t\t\t\t\t\t\t\ttype: 2,\r\n\t\t\t\t\t\t\t\ttitle: '新的职位申请',\r\n\t\t\t\t\t\t\t\tcontent: `${this.userInfo.name}申请了职位：${this.jobInfo.title}`\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: result.result.msg,\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '申请失败，请重试',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t})\r\n\t\t\t} finally {\r\n\t\t\t\tuni.hideLoading()\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\r\n<style>\r\n.detail-container {\r\n\tmin-height: 100vh;\r\n\tbackground-color: #f8f8f8;\r\n\tpadding-bottom: 120rpx;\r\n}\r\n\r\n.job-card {\r\n\tbackground-color: #fff;\r\n\tpadding: 40rpx;\r\n}\r\n\r\n.job-header {\r\n\tdisplay: flex;\r\n\tjustify-content: space-between;\r\n\talign-items: center;\r\n\tmargin-bottom: 30rpx;\r\n}\r\n\r\n.job-title {\r\n\tfont-size: 36rpx;\r\n\tfont-weight: bold;\r\n\tcolor: #333;\r\n}\r\n\r\n.job-salary {\r\n\tfont-size: 36rpx;\r\n\tcolor: #ff6b6b;\r\n\tfont-weight: bold;\r\n}\r\n\r\n.job-company {\r\n\tmargin-bottom: 30rpx;\r\n}\r\n\r\n.company-name {\r\n\tfont-size: 32rpx;\r\n\tcolor: #666;\r\n}\r\n\r\n.job-tags {\r\n\tdisplay: flex;\r\n\tflex-wrap: wrap;\r\n}\r\n\r\n.tag {\r\n\tfont-size: 24rpx;\r\n\tcolor: #666;\r\n\tbackground-color: #f5f5f5;\r\n\tpadding: 8rpx 20rpx;\r\n\tborder-radius: 24rpx;\r\n\tmargin-right: 16rpx;\r\n\tmargin-bottom: 16rpx;\r\n}\r\n\r\n.job-detail {\r\n\tmargin-top: 20rpx;\r\n\tbackground-color: #fff;\r\n\tpadding: 40rpx;\r\n}\r\n\r\n.section {\r\n\tmargin-bottom: 40rpx;\r\n}\r\n\r\n.section:last-child {\r\n\tmargin-bottom: 0;\r\n}\r\n\r\n.section-title {\r\n\tfont-size: 32rpx;\r\n\tfont-weight: bold;\r\n\tcolor: #333;\r\n\tmargin-bottom: 20rpx;\r\n}\r\n\r\n.section-content {\r\n\tfont-size: 28rpx;\r\n\tcolor: #666;\r\n\tline-height: 1.6;\r\n}\r\n\r\n.action-bar {\r\n\tposition: fixed;\r\n\tleft: 0;\r\n\tright: 0;\r\n\tbottom: 0;\r\n\tbackground-color: #fff;\r\n\tpadding: 20rpx 40rpx;\r\n\tbox-shadow: 0 -4rpx 20rpx rgba(0, 0, 0, 0.05);\r\n}\r\n\r\n.apply-btn {\r\n\twidth: 100%;\r\n\theight: 80rpx;\r\n\tbackground-color: #007AFF;\r\n\tcolor: #fff;\r\n\tborder-radius: 40rpx;\r\n\tfont-size: 32rpx;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n}\r\n</style> ","import MiniProgramPage from 'D:/programs2024to2025/yangmenglianprogram/fifth/RecruitmentSystemforMiddle-agedPeople/pages/job/detail.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","uniCloud"],"mappings":";;AA+CA,MAAK,YAAU;AAAA,EACd,OAAO;AACN,WAAO;AAAA,MACN,OAAO;AAAA,MACP,SAAS,CAAE;AAAA,MACX,UAAU;AAAA,IACX;AAAA,EACA;AAAA,EACD,OAAO,SAAS;AACf,SAAK,QAAQ,QAAQ;AACrB,SAAK,WAAWA,oBAAI,eAAe,UAAU;AAC7C,SAAK,cAAc;AAAA,EACnB;AAAA,EACD,SAAS;AAAA,IACR,MAAM,gBAAgB;AACrBA,oBAAAA,MAAI,YAAY;AAAA,QACf,OAAO;AAAA,OACP;AAED,UAAI;AACH,cAAM,SAAS,MAAMC,cAAQ,GAAC,aAAa;AAAA,UAC1C,MAAM;AAAA,UACN,MAAM;AAAA,YACL,QAAQ;AAAA,YACR,MAAM;AAAA,cACL,OAAO,KAAK;AAAA,YACb;AAAA,UACD;AAAA,SACA;AAED,YAAI,OAAO,OAAO,SAAS,GAAG;AAC7B,eAAK,UAAU,OAAO,OAAO;AAAA,eACvB;AACND,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO,OAAO,OAAO;AAAA,YACrB,MAAM;AAAA,WACN;AAAA,QACF;AAAA,MACD,SAAS,GAAG;AACXA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,SACN;AAAA,MACF,UAAU;AACTA,sBAAAA,MAAI,YAAY;AAAA,MACjB;AAAA,IACA;AAAA,IAED,MAAM,cAAc;AACnB,UAAI,CAAC,KAAK,UAAU;AACnBA,sBAAAA,MAAI,WAAW;AAAA,UACd,KAAK;AAAA,SACL;AACD;AAAA,MACD;AAEAA,oBAAAA,MAAI,YAAY;AAAA,QACf,OAAO;AAAA,OACP;AAED,UAAI;AACH,cAAM,SAAS,MAAMC,cAAQ,GAAC,aAAa;AAAA,UAC1C,MAAM;AAAA,UACN,MAAM;AAAA,YACL,QAAQ;AAAA,YACR,MAAM;AAAA,cACL,QAAQ,KAAK,SAAS;AAAA,cACtB,OAAO,KAAK;AAAA,YACb;AAAA,UACD;AAAA,SACA;AAED,YAAI,OAAO,OAAO,SAAS,GAAG;AAC7BD,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO;AAAA,YACP,MAAM;AAAA,WACN;AAGD,gBAAMC,cAAAA,GAAS,aAAa;AAAA,YAC3B,MAAM;AAAA,YACN,MAAM;AAAA,cACL,QAAQ;AAAA,cACR,MAAM;AAAA,gBACL,UAAU,KAAK,SAAS;AAAA,gBACxB,YAAY,KAAK,QAAQ;AAAA,gBACzB,MAAM;AAAA,gBACN,OAAO;AAAA,gBACP,SAAS,GAAG,KAAK,SAAS,IAAI,SAAS,KAAK,QAAQ,KAAK;AAAA,cAC1D;AAAA,YACD;AAAA,WACA;AAAA,eACK;AACND,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO,OAAO,OAAO;AAAA,YACrB,MAAM;AAAA,WACN;AAAA,QACF;AAAA,MACD,SAAS,GAAG;AACXA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,SACN;AAAA,MACF,UAAU;AACTA,sBAAAA,MAAI,YAAY;AAAA,MACjB;AAAA,IACD;AAAA,EACD;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;AC1JA,GAAG,WAAW,eAAe;"}