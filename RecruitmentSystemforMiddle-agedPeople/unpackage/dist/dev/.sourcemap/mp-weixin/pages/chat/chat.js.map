{"version":3,"file":"chat.js","sources":["pages/chat/chat.vue","E:/HBuilderX/HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvY2hhdC9jaGF0LnZ1ZQ"],"sourcesContent":["<!--\r\n * @description 聊天页面\r\n -->\r\n<template>\r\n\t<view class=\"chat-container\">\r\n\t\t<!-- 消息列表 -->\r\n\t\t<scroll-view \r\n\t\t\tclass=\"message-list\"\r\n\t\t\tscroll-y\r\n\t\t\t:scroll-top=\"scrollTop\"\r\n\t\t\t@scrolltoupper=\"loadMore\"\r\n\t\t>\r\n\t\t\t<!-- 加载更多 -->\r\n\t\t\t<view class=\"load-more\" v-if=\"hasMore\" @click=\"loadMore\">\r\n\t\t\t\t<text>加载更多</text>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<!-- 消息内容 -->\r\n\t\t\t<view \r\n\t\t\t\tclass=\"message-item\"\r\n\t\t\t\t:class=\"{ 'message-self': message.senderId === userInfo.userId }\"\r\n\t\t\t\tv-for=\"message in messageList\"\r\n\t\t\t\t:key=\"message._id\"\r\n\t\t\t>\r\n\t\t\t\t<image \r\n\t\t\t\t\tclass=\"avatar\"\r\n\t\t\t\t\t:src=\"message.senderId === userInfo.userId ? userInfo.avatar : targetUser.avatar\"\r\n\t\t\t\t\tmode=\"aspectFill\"\r\n\t\t\t\t></image>\r\n\t\t\t\t\r\n\t\t\t\t<view class=\"message-content\">\r\n\t\t\t\t\t<text v-if=\"message.type === 1\" class=\"text-content\">{{ message.content }}</text>\r\n\t\t\t\t\t<image \r\n\t\t\t\t\t\tv-else-if=\"message.type === 2\" \r\n\t\t\t\t\t\t:src=\"message.content\"\r\n\t\t\t\t\t\tmode=\"widthFix\"\r\n\t\t\t\t\t\tclass=\"image-content\"\r\n\t\t\t\t\t\t@tap=\"previewImage(message.content)\"\r\n\t\t\t\t\t></image>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</scroll-view>\r\n\t\t\r\n\t\t<!-- 输入区域 -->\r\n\t\t<view class=\"input-area\">\r\n\t\t\t<input \r\n\t\t\t\ttype=\"text\"\r\n\t\t\t\tv-model=\"inputContent\"\r\n\t\t\t\tplaceholder=\"请输入消息\"\r\n\t\t\t\t@confirm=\"sendTextMessage\"\r\n\t\t\t/>\r\n\t\t\t<view class=\"action-btns\">\r\n\t\t\t\t<button class=\"action-btn\" @tap=\"chooseImage\">\r\n\t\t\t\t\t<text class=\"iconfont\">+</text>\r\n\t\t\t\t</button>\r\n\t\t\t\t<button class=\"send-btn\" @tap=\"sendTextMessage\">发送</button>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tuserInfo: null,\r\n\t\t\ttargetUserId: '',\r\n\t\t\ttargetUser: {},\r\n\t\t\tmessageList: [],\r\n\t\t\tinputContent: '',\r\n\t\t\tpage: 1,\r\n\t\t\tpageSize: 20,\r\n\t\t\thasMore: true,\r\n\t\t\tscrollTop: 0,\r\n\t\t\tisFirstLoad: true\r\n\t\t}\r\n\t},\r\n\tasync onLoad(options) {\r\n\t\tthis.targetUserId = options.id\r\n\t\tthis.userInfo = uni.getStorageSync('userInfo')\r\n\t\t\r\n\t\tif (!this.userInfo) {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '请先登录',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '/pages/login/login'\r\n\t\t\t\t})\r\n\t\t\t}, 1500)\r\n\t\t\treturn\r\n\t\t}\r\n\t\t\r\n\t\t// 加载目标用户信息\r\n\t\tawait this.loadTargetUser()\r\n\t\t// 加载聊天记录\r\n\t\tawait this.loadChatHistory()\r\n\t\t// 标记消息已读\r\n\t\tthis.markMessagesAsRead()\r\n\t},\r\n\tmethods: {\r\n\t\tasync loadTargetUser() {\r\n\t\t\ttry {\r\n\t\t\t\tconst result = await uniCloud.callFunction({\r\n\t\t\t\t\tname: 'userInformationCenter',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\taction: 'getUserDetail',\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\tuserId: this.targetUserId\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t\tif (result.result.code === 0) {\r\n\t\t\t\t\tthis.targetUser = result.result.data\r\n\t\t\t\t\t// 设置页面标题\r\n\t\t\t\t\tuni.setNavigationBarTitle({\r\n\t\t\t\t\t\ttitle: this.targetUser.name\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.error(e)\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tasync loadChatHistory(loadMore = false) {\r\n\t\t\tif (!loadMore) {\r\n\t\t\t\tthis.page = 1\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\ttry {\r\n\t\t\t\tconst result = await uniCloud.callFunction({\r\n\t\t\t\t\tname: 'messageCenter',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\taction: 'getChatHistory',\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\tuserId: this.userInfo.userId,\r\n\t\t\t\t\t\t\ttargetUserId: this.targetUserId,\r\n\t\t\t\t\t\t\tpage: this.page,\r\n\t\t\t\t\t\t\tpageSize: this.pageSize\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t\tif (result.result.code === 0) {\r\n\t\t\t\t\tconst { list, total } = result.result.data\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (loadMore) {\r\n\t\t\t\t\t\tthis.messageList = [...list, ...this.messageList]\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.messageList = list\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.hasMore = this.messageList.length < total\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 首次加载滚动到底部\r\n\t\t\t\t\tif (this.isFirstLoad) {\r\n\t\t\t\t\t\tthis.isFirstLoad = false\r\n\t\t\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\t\t\tthis.scrollToBottom()\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '加载失败',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tasync sendTextMessage() {\r\n\t\t\tif (!this.inputContent.trim()) return\r\n\t\t\t\r\n\t\t\ttry {\r\n\t\t\t\tconst result = await uniCloud.callFunction({\r\n\t\t\t\t\tname: 'messageCenter',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\taction: 'sendChatMessage',\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\tsenderId: this.userInfo.userId,\r\n\t\t\t\t\t\t\treceiverId: this.targetUserId,\r\n\t\t\t\t\t\t\tcontent: this.inputContent,\r\n\t\t\t\t\t\t\ttype: 1 // 文本消息\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t\tif (result.result.code === 0) {\r\n\t\t\t\t\t// 添加到消息列表\r\n\t\t\t\t\tthis.messageList.push({\r\n\t\t\t\t\t\t_id: result.result.data.messageId,\r\n\t\t\t\t\t\tsenderId: this.userInfo.userId,\r\n\t\t\t\t\t\tcontent: this.inputContent,\r\n\t\t\t\t\t\ttype: 1,\r\n\t\t\t\t\t\tcreateTime: Date.now()\r\n\t\t\t\t\t})\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 清空输入框\r\n\t\t\t\t\tthis.inputContent = ''\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 滚动到底部\r\n\t\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\t\tthis.scrollToBottom()\r\n\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: result.result.msg,\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '发送失败',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tasync chooseImage() {\r\n\t\t\ttry {\r\n\t\t\t\tconst res = await uni.chooseImage({\r\n\t\t\t\t\tcount: 1,\r\n\t\t\t\t\tsizeType: ['compressed']\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t\tif (res.tempFilePaths.length > 0) {\r\n\t\t\t\t\tconst tempFilePath = res.tempFilePaths[0]\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 上传图片\r\n\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\ttitle: '发送中...'\r\n\t\t\t\t\t})\r\n\t\t\t\t\t\r\n\t\t\t\t\tconst uploadRes = await uniCloud.uploadFile({\r\n\t\t\t\t\t\tfilePath: tempFilePath,\r\n\t\t\t\t\t\tcloudPath: `chat/${Date.now()}-${Math.random().toString(36).slice(-6)}.jpg`\r\n\t\t\t\t\t})\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 发送图片消息\r\n\t\t\t\t\tconst result = await uniCloud.callFunction({\r\n\t\t\t\t\t\tname: 'messageCenter',\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\taction: 'sendChatMessage',\r\n\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\tsenderId: this.userInfo.userId,\r\n\t\t\t\t\t\t\t\treceiverId: this.targetUserId,\r\n\t\t\t\t\t\t\t\tcontent: uploadRes.fileID,\r\n\t\t\t\t\t\t\t\ttype: 2 // 图片消息\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (result.result.code === 0) {\r\n\t\t\t\t\t\t// 添加到消息列表\r\n\t\t\t\t\t\tthis.messageList.push({\r\n\t\t\t\t\t\t\t_id: result.result.data.messageId,\r\n\t\t\t\t\t\t\tsenderId: this.userInfo.userId,\r\n\t\t\t\t\t\t\tcontent: uploadRes.fileID,\r\n\t\t\t\t\t\t\ttype: 2,\r\n\t\t\t\t\t\t\tcreateTime: Date.now()\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// 滚动到底部\r\n\t\t\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\t\t\tthis.scrollToBottom()\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {\r\n\t\t\t\tuni.hideLoading()\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '发送失败',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tasync markMessagesAsRead() {\r\n\t\t\ttry {\r\n\t\t\t\tawait uniCloud.callFunction({\r\n\t\t\t\t\tname: 'messageCenter',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\taction: 'readChatMessage',\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\tuserId: this.userInfo.userId,\r\n\t\t\t\t\t\t\tsenderId: this.targetUserId\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.error(e)\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tloadMore() {\r\n\t\t\tif (this.hasMore) {\r\n\t\t\t\tthis.page++\r\n\t\t\t\tthis.loadChatHistory(true)\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tscrollToBottom() {\r\n\t\t\tconst query = uni.createSelectorQuery().in(this)\r\n\t\t\tquery.select('.message-list').boundingClientRect(data => {\r\n\t\t\t\tthis.scrollTop = data.height * 2\r\n\t\t\t}).exec()\r\n\t\t},\r\n\t\t\r\n\t\tpreviewImage(url) {\r\n\t\t\tuni.previewImage({\r\n\t\t\t\turls: [url]\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\r\n<style>\r\n.chat-container {\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\theight: 100vh;\r\n\tbackground-color: #f8f8f8;\r\n}\r\n\r\n.message-list {\r\n\tflex: 1;\r\n\tpadding: 20rpx;\r\n}\r\n\r\n.message-item {\r\n\tdisplay: flex;\r\n\tmargin-bottom: 30rpx;\r\n}\r\n\r\n.message-self {\r\n\tflex-direction: row-reverse;\r\n}\r\n\r\n.avatar {\r\n\twidth: 80rpx;\r\n\theight: 80rpx;\r\n\tborder-radius: 40rpx;\r\n\tmargin: 0 20rpx;\r\n}\r\n\r\n.message-content {\r\n\tmax-width: 60%;\r\n}\r\n\r\n.text-content {\r\n\tdisplay: inline-block;\r\n\tpadding: 20rpx;\r\n\tborder-radius: 10rpx;\r\n\tbackground-color: #fff;\r\n\tfont-size: 28rpx;\r\n\tcolor: #333;\r\n\tword-break: break-all;\r\n}\r\n\r\n.message-self .text-content {\r\n\tbackground-color: #007AFF;\r\n\tcolor: #fff;\r\n}\r\n\r\n.image-content {\r\n\tmax-width: 100%;\r\n\tborder-radius: 10rpx;\r\n}\r\n\r\n.input-area {\r\n\tbackground-color: #fff;\r\n\tpadding: 20rpx;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tborder-top: 2rpx solid #f5f5f5;\r\n}\r\n\r\n.input-area input {\r\n\tflex: 1;\r\n\theight: 80rpx;\r\n\tbackground-color: #f5f5f5;\r\n\tborder-radius: 40rpx;\r\n\tpadding: 0 30rpx;\r\n\tfont-size: 28rpx;\r\n\tmargin-right: 20rpx;\r\n}\r\n\r\n.action-btns {\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n}\r\n\r\n.action-btn {\r\n\twidth: 80rpx;\r\n\theight: 80rpx;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n\tmargin-right: 20rpx;\r\n}\r\n\r\n.action-btn .iconfont {\r\n\tfont-size: 48rpx;\r\n\tcolor: #999;\r\n}\r\n\r\n.send-btn {\r\n\twidth: 120rpx;\r\n\theight: 80rpx;\r\n\tbackground-color: #007AFF;\r\n\tcolor: #fff;\r\n\tborder-radius: 40rpx;\r\n\tfont-size: 28rpx;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n}\r\n\r\n.load-more {\r\n\ttext-align: center;\r\n\tpadding: 20rpx 0;\r\n}\r\n\r\n.load-more text {\r\n\tfont-size: 24rpx;\r\n\tcolor: #999;\r\n}\r\n</style> ","import MiniProgramPage from 'D:/programs2024to2025/yangmenglianprogram/fifth/RecruitmentSystemforMiddle-agedPeople/pages/chat/chat.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","uniCloud"],"mappings":"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"}