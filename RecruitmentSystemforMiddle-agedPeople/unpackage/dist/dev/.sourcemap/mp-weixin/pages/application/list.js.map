{"version":3,"file":"list.js","sources":["pages/application/list.vue","E:/HBuilderX/HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvYXBwbGljYXRpb24vbGlzdC52dWU"],"sourcesContent":["<!--\r\n * @description 应聘记录页面\r\n -->\r\n<template>\r\n\t<view class=\"list-container\">\r\n\t\t<view class=\"tab-bar\">\r\n\t\t\t<view \r\n\t\t\t\tclass=\"tab-item\" \r\n\t\t\t\t:class=\"{ active: status === 1 }\"\r\n\t\t\t\t@click=\"handleTabChange(1)\"\r\n\t\t\t>\r\n\t\t\t\t待处理\r\n\t\t\t</view>\r\n\t\t\t<view \r\n\t\t\t\tclass=\"tab-item\" \r\n\t\t\t\t:class=\"{ active: status === 2 }\"\r\n\t\t\t\t@click=\"handleTabChange(2)\"\r\n\t\t\t>\r\n\t\t\t\t已通过\r\n\t\t\t</view>\r\n\t\t\t<view \r\n\t\t\t\tclass=\"tab-item\" \r\n\t\t\t\t:class=\"{ active: status === 3 }\"\r\n\t\t\t\t@click=\"handleTabChange(3)\"\r\n\t\t\t>\r\n\t\t\t\t已拒绝\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<view class=\"application-list\">\r\n\t\t\t<view \r\n\t\t\t\tclass=\"application-item\"\r\n\t\t\t\tv-for=\"item in applicationList\"\r\n\t\t\t\t:key=\"item._id\"\r\n\t\t\t>\r\n\t\t\t\t<view class=\"job-info\">\r\n\t\t\t\t\t<text class=\"job-title\">{{ item.jobInfo[0].title }}</text>\r\n\t\t\t\t\t<text class=\"job-salary\">{{ item.jobInfo[0].salary }}</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t\r\n\t\t\t\t<view class=\"company-info\" v-if=\"this.userInfo.userType === 1\">\r\n\t\t\t\t\t<text class=\"company-name\">{{ item.jobInfo[0].companyName }}</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t\r\n\t\t\t\t<view class=\"applicant-info\" v-if=\"this.userInfo.userType === 2\">\r\n\t\t\t\t\t<text class=\"applicant-name\">申请人：{{ item.userInfo[0].name }}</text>\r\n\t\t\t\t\t<text class=\"apply-time\">申请时间：{{ formatTime(item.createTime) }}</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t\r\n\t\t\t\t<view class=\"status-bar\">\r\n\t\t\t\t\t<text class=\"status-text\" :class=\"'status-' + item.status\">\r\n\t\t\t\t\t\t{{ getStatusText(item.status) }}\r\n\t\t\t\t\t</text>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<view class=\"action-btns\" v-if=\"this.userInfo.userType === 2 && item.status === 1\">\r\n\t\t\t\t\t\t<button \r\n\t\t\t\t\t\t\tclass=\"btn btn-primary\"\r\n\t\t\t\t\t\t\t@click=\"handleApplication(item._id, 2)\"\r\n\t\t\t\t\t\t>通过</button>\r\n\t\t\t\t\t\t<button \r\n\t\t\t\t\t\t\tclass=\"btn btn-danger\"\r\n\t\t\t\t\t\t\t@click=\"handleApplication(item._id, 3)\"\r\n\t\t\t\t\t\t>拒绝</button>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<!-- 加载更多 -->\r\n\t\t<view class=\"load-more\" v-if=\"hasMore\" @click=\"loadMore\">\r\n\t\t\t<text>加载更多</text>\r\n\t\t</view>\r\n\t\t<view class=\"no-more\" v-else>\r\n\t\t\t<text>没有更多了</text>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tuserInfo: null,\r\n\t\t\tstatus: 1,\r\n\t\t\tpage: 1,\r\n\t\t\tpageSize: 10,\r\n\t\t\tapplicationList: [],\r\n\t\t\thasMore: true\r\n\t\t}\r\n\t},\r\n\tonShow() {\r\n\t\tthis.userInfo = uni.getStorageSync('userInfo')\r\n        console.log(\"userInfo   \",this.userInfo)\r\n        console.log(\"uni.getStorageSync('userInfo')\",uni.getStorageSync('userInfo'))\r\n\t\tthis.resetList()\r\n\t},\r\n\tmethods: {\r\n\t\thandleTabChange(status) {\r\n\t\t\tthis.status = status\r\n\t\t\tthis.resetList()\r\n\t\t},\r\n\t\t\r\n\t\tresetList() {\r\n\t\t\tthis.page = 1\r\n\t\t\tthis.applicationList = []\r\n\t\t\tthis.hasMore = true\r\n\t\t\tthis.loadApplicationList()\r\n\t\t},\r\n\t\t\r\n\t\tasync loadApplicationList(loadMore = false) {\r\n\t\t\tif (!loadMore) {\r\n\t\t\t\tthis.page = 1\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tuni.showLoading({\r\n\t\t\t\ttitle: '加载中...'\r\n\t\t\t})\r\n\t\t\t\r\n\t\t\ttry {\r\n                console.log(\"this.userInfo.userId\",this.userInfo)\r\n\t\t\t\tconst result = await uniCloud.callFunction({\r\n\t\t\t\t\tname: 'jobCenter',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\taction: 'getApplicationList',\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\tuserId: this.userInfo.userId,\r\n\t\t\t\t\t\t\tuserType: this.userInfo.userType,\r\n\t\t\t\t\t\t\tstatus: this.status,\r\n\t\t\t\t\t\t\tpage: this.page,\r\n\t\t\t\t\t\t\tpageSize: this.pageSize\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t\tif (result.result.code === 0) {\r\n\t\t\t\t\tconst { list, total } = result.result.data\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (loadMore) {\r\n\t\t\t\t\t\tthis.applicationList = [...this.applicationList, ...list]\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.applicationList = list\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.hasMore = this.applicationList.length < total\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: result.result.msg,\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '加载失败，请重试',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t})\r\n\t\t\t} finally {\r\n\t\t\t\tuni.hideLoading()\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tloadMore() {\r\n\t\t\tif (this.hasMore) {\r\n\t\t\t\tthis.page++\r\n\t\t\t\tthis.loadApplicationList(true)\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tasync handleApplication(applicationId, status) {\r\n\t\t\tuni.showLoading({\r\n\t\t\t\ttitle: '处理中...'\r\n\t\t\t})\r\n\t\t\t\r\n\t\t\ttry {\r\n\t\t\t\tconst result = await uniCloud.callFunction({\r\n\t\t\t\t\tname: 'jobCenter',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\taction: 'handleApplication',\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\tapplicationId,\r\n\t\t\t\t\t\t\tstatus\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t\tif (result.result.code === 0) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '操作成功',\r\n\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t})\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 刷新列表\r\n\t\t\t\t\tthis.resetList()\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: result.result.msg,\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '操作失败，请重试',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t})\r\n\t\t\t} finally {\r\n\t\t\t\tuni.hideLoading()\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tformatTime(timestamp) {\r\n\t\t\tconst date = new Date(timestamp)\r\n\t\t\treturn `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}-${String(date.getDate()).padStart(2, '0')}`\r\n\t\t},\r\n\t\t\r\n\t\tgetStatusText(status) {\r\n\t\t\tswitch (status) {\r\n\t\t\t\tcase 1:\r\n\t\t\t\t\treturn '待处理'\r\n\t\t\t\tcase 2:\r\n\t\t\t\t\treturn '已通过'\r\n\t\t\t\tcase 3:\r\n\t\t\t\t\treturn '已拒绝'\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn '未知状态'\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\r\n<style>\r\n.list-container {\r\n\tmin-height: 100vh;\r\n\tbackground-color: #f8f8f8;\r\n\tpadding-bottom: 30rpx;\r\n}\r\n\r\n.tab-bar {\r\n\tdisplay: flex;\r\n\tbackground-color: #fff;\r\n\tpadding: 20rpx 30rpx;\r\n\tmargin-bottom: 20rpx;\r\n}\r\n\r\n.tab-item {\r\n\tflex: 1;\r\n\ttext-align: center;\r\n\tfont-size: 28rpx;\r\n\tcolor: #666;\r\n\tpadding: 20rpx 0;\r\n\tposition: relative;\r\n}\r\n\r\n.tab-item.active {\r\n\tcolor: #007AFF;\r\n\tfont-weight: bold;\r\n}\r\n\r\n.tab-item.active::after {\r\n\tcontent: '';\r\n\tposition: absolute;\r\n\tleft: 50%;\r\n\tbottom: 0;\r\n\ttransform: translateX(-50%);\r\n\twidth: 40rpx;\r\n\theight: 4rpx;\r\n\tbackground-color: #007AFF;\r\n\tborder-radius: 2rpx;\r\n}\r\n\r\n.application-list {\r\n\tpadding: 0 20rpx;\r\n}\r\n\r\n.application-item {\r\n\tbackground-color: #fff;\r\n\tborder-radius: 20rpx;\r\n\tpadding: 30rpx;\r\n\tmargin-bottom: 20rpx;\r\n}\r\n\r\n.job-info {\r\n\tdisplay: flex;\r\n\tjustify-content: space-between;\r\n\talign-items: center;\r\n\tmargin-bottom: 20rpx;\r\n}\r\n\r\n.job-title {\r\n\tfont-size: 32rpx;\r\n\tfont-weight: bold;\r\n\tcolor: #333;\r\n}\r\n\r\n.job-salary {\r\n\tfont-size: 32rpx;\r\n\tcolor: #ff6b6b;\r\n\tfont-weight: bold;\r\n}\r\n\r\n.company-info, .applicant-info {\r\n\tmargin-bottom: 20rpx;\r\n}\r\n\r\n.company-name, .applicant-name {\r\n\tfont-size: 28rpx;\r\n\tcolor: #666;\r\n}\r\n\r\n.apply-time {\r\n\tfont-size: 24rpx;\r\n\tcolor: #999;\r\n\tmargin-left: 20rpx;\r\n}\r\n\r\n.status-bar {\r\n\tdisplay: flex;\r\n\tjustify-content: space-between;\r\n\talign-items: center;\r\n}\r\n\r\n.status-text {\r\n\tfont-size: 26rpx;\r\n}\r\n\r\n.status-1 {\r\n\tcolor: #ffa502;\r\n}\r\n\r\n.status-2 {\r\n\tcolor: #2ed573;\r\n}\r\n\r\n.status-3 {\r\n\tcolor: #ff4757;\r\n}\r\n\r\n.action-btns {\r\n\tdisplay: flex;\r\n\tgap: 20rpx;\r\n}\r\n\r\n.btn {\r\n\tpadding: 10rpx 30rpx;\r\n\tborder-radius: 30rpx;\r\n\tfont-size: 24rpx;\r\n}\r\n\r\n.btn-primary {\r\n\tbackground-color: #007AFF;\r\n\tcolor: #fff;\r\n}\r\n\r\n.btn-danger {\r\n\tbackground-color: #ff4757;\r\n\tcolor: #fff;\r\n}\r\n\r\n.load-more, .no-more {\r\n\ttext-align: center;\r\n\tpadding: 30rpx 0;\r\n}\r\n\r\n.load-more text, .no-more text {\r\n\tfont-size: 26rpx;\r\n\tcolor: #999;\r\n}\r\n</style> ","import MiniProgramPage from 'D:/programs2024to2025/yangmenglianprogram/fifth/RecruitmentSystemforMiddle-agedPeople/pages/application/list.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","uniCloud"],"mappings":"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"}