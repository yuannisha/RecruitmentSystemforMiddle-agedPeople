{"version":3,"file":"index.js","sources":["pages/index/index.vue","E:/HBuilderX/HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvaW5kZXgvaW5kZXgudnVl"],"sourcesContent":["<!--\n * @description 首页\n -->\n<template>\n\t<view class=\"index-container\">\n\t\t<!-- 搜索栏 -->\n\t\t<view class=\"search-bar\">\n\t\t\t<input \n\t\t\t\ttype=\"text\" \n\t\t\t\tv-model=\"keyword\"\n\t\t\t\t:placeholder=\"userInfo?.userType === 1 ? '搜索职位' : '搜索求职者'\"\n\t\t\t\t@confirm=\"handleSearch\"\n\t\t\t/>\n\t\t\t<button class=\"search-btn\" @click=\"handleSearch\">搜索</button>\n\t\t</view>\n\t\t\n\t\t<!-- 求职者视图：职位列表 -->\n\t\t<block v-if=\"userInfo?.userType === 1\">\n\t\t\t<view class=\"job-list\">\n\t\t\t\t<view \n\t\t\t\t\tclass=\"job-item\" \n\t\t\t\t\tv-for=\"job in jobList\" \n\t\t\t\t\t:key=\"job._id\"\n\t\t\t\t\t@click=\"goToJobDetail(job._id)\"\n\t\t\t\t>\n\t\t\t\t\t<view class=\"job-header\">\n\t\t\t\t\t\t<text class=\"job-title\">{{ job.title }}</text>\n\t\t\t\t\t\t<text class=\"job-salary\">{{ job.salary }}</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t\n\t\t\t\t\t<view class=\"job-company\">\n\t\t\t\t\t\t<text class=\"company-name\">{{ job.companyName }}</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t\n\t\t\t\t\t<view class=\"job-tags\">\n\t\t\t\t\t\t<text class=\"tag\" v-if=\"job.experience\">{{ job.experience }}</text>\n\t\t\t\t\t\t<text class=\"tag\" v-if=\"job.education\">{{ job.education }}</text>\n\t\t\t\t\t\t<text class=\"tag\" v-if=\"job.location\">{{ job.location }}</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t\n\t\t\t\t\t<view class=\"job-desc\">{{ job.description }}</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</block>\n\t\t\n\t\t<!-- 企业视图：求职者列表 -->\n\t\t<block v-else-if=\"userInfo?.userType === 2\">\n\t\t\t<view class=\"user-list\">\n\t\t\t\t<view \n\t\t\t\t\tclass=\"user-item\" \n\t\t\t\t\tv-for=\"user in userList\" \n\t\t\t\t\t:key=\"user._id\"\n\t\t\t\t\t@click=\"goToUserDetail(user._id)\"\n\t\t\t\t>\n\t\t\t\t\t<view class=\"user-header\">\n\t\t\t\t\t\t<view class=\"user-info\">\n\t\t\t\t\t\t\t<text class=\"user-name\">{{ user.name }}</text>\n\t\t\t\t\t\t\t<text class=\"user-age\" v-if=\"user.age\">{{ user.age }}岁</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t\n\t\t\t\t\t<view class=\"user-tags\">\n\t\t\t\t\t\t<text class=\"tag\" v-if=\"user.experience\">{{ user.experience }}</text>\n\t\t\t\t\t\t<text class=\"tag\" v-if=\"user.education\">{{ user.education }}</text>\n\t\t\t\t\t\t<text class=\"tag\" v-if=\"user.location\">{{ user.location }}</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t\n\t\t\t\t\t<view class=\"user-intention\">\n\t\t\t\t\t\t<text class=\"intention-label\">求职意向：</text>\n\t\t\t\t\t\t<text class=\"intention-value\">{{ user.jobIntention || '暂无' }}</text>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</block>\n\t\t\n\t\t<!-- 未登录提示 -->\n\t\t<view class=\"login-tip\" v-else>\n\t\t\t<text>请先登录</text>\n\t\t\t<button class=\"login-btn\" @click=\"goToLogin\">去登录</button>\n\t\t</view>\n\t\t\n\t\t<!-- 加载更多 -->\n\t\t<view class=\"load-more\" v-if=\"hasMore\" @click=\"loadMore\">\n\t\t\t<text>加载更多</text>\n\t\t</view>\n\t\t<view class=\"no-more\" v-else>\n\t\t\t<text>没有更多了</text>\n\t\t</view>\n\t</view>\n</template>\n\n<script>\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tuserInfo: null,\n\t\t\t\tkeyword: '',\n\t\t\t\tpage: 1,\n\t\t\t\tpageSize: 10,\n\t\t\t\tjobList: [],\n\t\t\t\tuserList: [],\n\t\t\t\thasMore: true\n\t\t\t}\n\t\t},\n\t\tonShow() {\n\t\t\tthis.userInfo = uni.getStorageSync('userInfo')\n\t\t\tthis.resetList()\n\t\t},\n\t\tonPullDownRefresh() {\n\t\t\tthis.resetList()\n\t\t},\n\t\tmethods: {\n\t\t\tresetList() {\n\t\t\t\tthis.page = 1\n\t\t\t\tthis.jobList = []\n\t\t\t\tthis.userList = []\n\t\t\t\tthis.hasMore = true\n\t\t\t\tthis.loadData()\n\t\t\t},\n\t\t\t\n\t\t\thandleSearch() {\n\t\t\t\tthis.resetList()\n\t\t\t},\n\t\t\t\n\t\t\tasync loadData(loadMore = false) {\n\t\t\t\tif (!this.userInfo) return\n\t\t\t\t\n\t\t\t\tif (!loadMore) {\n\t\t\t\t\tthis.page = 1\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tuni.showLoading({\n\t\t\t\t\ttitle: '加载中...'\n\t\t\t\t})\n\t\t\t\t\n\t\t\t\ttry {\n\t\t\t\t\tif (this.userInfo.userType === 1) {\n\t\t\t\t\t\t// 求职者视图：加载职位列表\n\t\t\t\t\t\tawait this.loadJobList(loadMore)\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// 企业视图：加载求职者列表\n\t\t\t\t\t\tawait this.loadUserList(loadMore)\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '加载失败，请重试',\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t})\n\t\t\t\t} finally {\n\t\t\t\t\tuni.hideLoading()\n\t\t\t\t\tuni.stopPullDownRefresh()\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\tasync loadJobList(loadMore) {\n\t\t\t\tconst result = await uniCloud.callFunction({\n\t\t\t\t\tname: 'jobCenter',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\taction: 'getJobList',\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tkeyword: this.keyword,\n\t\t\t\t\t\t\tpage: this.page,\n\t\t\t\t\t\t\tpageSize: this.pageSize\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t\n\t\t\t\tif (result.result.code === 0) {\n\t\t\t\t\tconst { list, total } = result.result.data\n\t\t\t\t\t\n\t\t\t\t\tif (loadMore) {\n\t\t\t\t\t\tthis.jobList = [...this.jobList, ...list]\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.jobList = list\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tthis.hasMore = this.jobList.length < total\n\t\t\t\t} else {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: result.result.msg,\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\tasync loadUserList(loadMore) {\n\t\t\t\tconst result = await uniCloud.callFunction({\n\t\t\t\t\tname: 'userInformationCenter',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\taction: 'getUserList',\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tkeyword: this.keyword,\n\t\t\t\t\t\t\tuserType: 1, // 只查询求职者\n\t\t\t\t\t\t\tpage: this.page,\n\t\t\t\t\t\t\tpageSize: this.pageSize\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t\n\t\t\t\tif (result.result.code === 0) {\n\t\t\t\t\tconst { list, total } = result.result.data\n\t\t\t\t\t\n\t\t\t\t\tif (loadMore) {\n\t\t\t\t\t\tthis.userList = [...this.userList, ...list]\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.userList = list\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tthis.hasMore = this.userList.length < total\n\t\t\t\t} else {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: result.result.msg,\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\tloadMore() {\n\t\t\t\tif (this.hasMore) {\n\t\t\t\t\tthis.page++\n\t\t\t\t\tthis.loadData(true)\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\tgoToJobDetail(jobId) {\n\t\t\t\tuni.navigateTo({\n\t\t\t\t\turl: `/pages/job/detail?id=${jobId}`\n\t\t\t\t})\n\t\t\t},\n\t\t\t\n\t\t\tgoToUserDetail(userId) {\n\t\t\t\tuni.navigateTo({\n\t\t\t\t\turl: `/pages/user/detail?id=${userId}`\n\t\t\t\t})\n\t\t\t},\n\t\t\t\n\t\t\tgoToLogin() {\n\t\t\t\tuni.navigateTo({\n\t\t\t\t\turl: '/pages/login/login'\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style>\n\t.index-container {\n\t\tmin-height: 100vh;\n\t\tbackground-color: #f8f8f8;\n\t\tpadding: 30rpx;\n\t}\n\n\t.search-bar {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tmargin-bottom: 30rpx;\n\t}\n\n\t.search-bar input {\n\t\tflex: 1;\n\t\theight: 80rpx;\n\t\tbackground-color: #fff;\n\t\tborder-radius: 40rpx;\n\t\tpadding: 0 30rpx;\n\t\tfont-size: 28rpx;\n\t\tmargin-right: 20rpx;\n\t}\n\n\t.search-btn {\n\t\twidth: 120rpx;\n\t\theight: 80rpx;\n\t\tbackground-color: #007AFF;\n\t\tcolor: #fff;\n\t\tborder-radius: 40rpx;\n\t\tfont-size: 28rpx;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t}\n\n\t/* 职位列表样式 */\n\t.job-list {\n\t\tmargin-bottom: 30rpx;\n\t}\n\n\t.job-item {\n\t\tbackground-color: #fff;\n\t\tpadding: 30rpx;\n\t\tborder-radius: 20rpx;\n\t\tmargin-bottom: 20rpx;\n\t}\n\n\t.job-header {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t\tmargin-bottom: 20rpx;\n\t}\n\n\t.job-title {\n\t\tfont-size: 32rpx;\n\t\tfont-weight: bold;\n\t\tcolor: #333;\n\t}\n\n\t.job-salary {\n\t\tfont-size: 32rpx;\n\t\tcolor: #ff6b6b;\n\t\tfont-weight: bold;\n\t}\n\n\t.job-company {\n\t\tmargin-bottom: 20rpx;\n\t}\n\n\t.company-name {\n\t\tfont-size: 28rpx;\n\t\tcolor: #666;\n\t}\n\n\t/* 求职者列表样式 */\n\t.user-list {\n\t\tmargin-bottom: 30rpx;\n\t}\n\n\t.user-item {\n\t\tbackground-color: #fff;\n\t\tpadding: 30rpx;\n\t\tborder-radius: 20rpx;\n\t\tmargin-bottom: 20rpx;\n\t}\n\n\t.user-header {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t\tmargin-bottom: 20rpx;\n\t}\n\n\t.user-info {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t}\n\n\t.user-name {\n\t\tfont-size: 32rpx;\n\t\tfont-weight: bold;\n\t\tcolor: #333;\n\t\tmargin-right: 20rpx;\n\t}\n\n\t.user-age {\n\t\tfont-size: 28rpx;\n\t\tcolor: #666;\n\t}\n\n\t.user-tags {\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\t\tmargin-bottom: 20rpx;\n\t}\n\n\t.tag {\n\t\tfont-size: 24rpx;\n\t\tcolor: #666;\n\t\tbackground-color: #f5f5f5;\n\t\tpadding: 8rpx 20rpx;\n\t\tborder-radius: 24rpx;\n\t\tmargin-right: 16rpx;\n\t\tmargin-bottom: 16rpx;\n\t}\n\n\t.user-intention {\n\t\tfont-size: 28rpx;\n\t\tcolor: #666;\n\t}\n\n\t.intention-label {\n\t\tcolor: #999;\n\t}\n\n\t/* 未登录提示 */\n\t.login-tip {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tpadding: 100rpx 0;\n\t}\n\n\t.login-tip text {\n\t\tfont-size: 32rpx;\n\t\tcolor: #666;\n\t\tmargin-bottom: 40rpx;\n\t}\n\n\t.login-btn {\n\t\twidth: 240rpx;\n\t\theight: 80rpx;\n\t\tbackground-color: #007AFF;\n\t\tcolor: #fff;\n\t\tborder-radius: 40rpx;\n\t\tfont-size: 32rpx;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t}\n\n\t/* 加载更多 */\n\t.load-more, .no-more {\n\t\ttext-align: center;\n\t\tpadding: 30rpx 0;\n\t}\n\n\t.load-more text, .no-more text {\n\t\tfont-size: 26rpx;\n\t\tcolor: #999;\n\t}\n</style>\n","import MiniProgramPage from 'D:/programs2024to2025/yangmenglianprogram/fifth/RecruitmentSystemforMiddle-agedPeople/pages/index/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","uniCloud"],"mappings":"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"}